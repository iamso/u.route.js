/*!
 * u.route.js - Version 0.1.4
 * simple routing for the browser
 * Author: Steve Ottoz <so@dev.so>
 * Build date: 2016-02-29
 * Copyright (c) 2016 Steve Ottoz
 * Released under the MIT license
 */
!function(a){"use strict";var b=a.pushState,c=a.replaceState;a.pushState=function(c){var d=b.apply(a,arguments);return/^f/.test(typeof a.onpushstate)&&a.onpushstate(c),d},a.replaceState=function(b){var d=c.apply(a,arguments);return/^f/.test(typeof a.onpushstate)&&a.onpushstate(b),d}}(window.history),function(u,a,b,c){"use strict";function d(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))}function e(){var b,c={},d=/[?&]?([^=]+)=([^&]*)/g,e=a.location.search;for(e=e.split("+").join(" ");b=d.exec(e);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c}var f=[],g=[],h="",i="";u.route=function(a,b,c){var e={};e.path=a,e.mw=c?b:null,e.fn=c||b,e.keys=[],e.params={},e.regex=d(e.path,e.keys,!1,!1),f.push(e)},u.route.use=function(a){/^f/.test(typeof a)&&g.indexOf(a)<0&&g.push(a)},u.route.redirect=function(a,c){(c?b.replaceState:b.pushState)({url:a,date:new Date},null,a)},u.route.reload=function(b){var c,d,j=(b&&b.url?b.url:a.location.pathname).split("?")[0],k=!0,l={},m=u.extend({},location,{params:l,pathname:j,query:e()});u.each(f,function(a,b){c||(d=j.match(b.regex))&&(c=b)}),c?(d&&(d.shift(),d=u.toArray(d)),u.each(d,function(a,b){l[c.keys[a].name]=b}),m=u.extend(m,{route:c.path,params:l}),u.each(g,function(b,c){var d=c.apply(a,[m]);k=d===!1?d:k}),k&&(c.mw?c.mw.apply(a,[m])!==!1&&c.fn.apply(a,[m]):c.fn.apply(a,[m]))):(u.each(g,function(b,c){var d=c.apply(a,[m]);k=d===!1?d:k}),k&&(m=u.extend(m,{route:null}),u.route["default"]&&u.route["default"].apply(a,[m]))),h=j,i=location.hash},u.route.init=function(){b.onpushstate=u.route.reload,u(a).on("popstate",function(a){return h===a.target.location.pathname&&h!==a.target.location.hash?(a.preventDefault(),!1):void u.route.reload()}),u.route.reload()}}(ujs,window,window.history);
//# sourceMappingURL=u.route.min.js.map