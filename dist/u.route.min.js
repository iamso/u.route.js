/*!
 * u.route.js - Version 0.3.0
 * simple routing for the browser
 * Author: Steve Ottoz <so@dev.so>
 * Build date: 2016-07-29
 * Copyright (c) 2016 Steve Ottoz
 * Released under the MIT license
 */
!function(a){"use strict";/^f/.test(typeof define)&&define.amd?define(["ujs"],a):a(/^o/.test(typeof exports)?require("ujs"):ujs)}(function(a){function b(a,b,c,d){return a instanceof RegExp?a:(a instanceof Array&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(a,c,d,e,f,g){return b.push({name:e,optional:!!g}),c=c||"",""+(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))}function c(){var a,b={},c=/[?&]?([^=]+)=([^&]*)/g,d=window.location.search;for(d=d.split("+").join(" ");a=c.exec(d);)b[decodeURIComponent(a[1])]=decodeURIComponent(a[2]);return b}!function(a){"use strict";if(!a&&!a.pushState)return!1;var b=a.pushState,c=a.replaceState;a.pushState=function(c){var d=b.apply(a,arguments);return/^f/.test(typeof a.onpushstate)&&a.onpushstate(c),d},a.replaceState=function(b){var d=c.apply(a,arguments);return/^f/.test(typeof a.onpushstate)&&a.onpushstate(b),d}}(window.history);var d=history&&history.pushState,e=[],f=[],g="",h="",i=!1,j="#!";a.route=function(a,c,d){var f={};f.path=a,f.mw=d?c:null,f.fn=d||c,f.keys=[],f.params={},f.regex=b(f.path,f.keys,!1,!1),e.push(f)},a.route.use=function(a){/^f/.test(typeof a)&&f.indexOf(a)<0&&f.push(a)},a.route.redirect=function(a,b){i?window.location.hash=j+a:d?(b?history.replaceState:history.pushState)({url:a,date:new Date},null,a):window.location.href=a},a.route.reload=function(b){var d,k,l=i?location.hash.replace(j,""):(b&&b.url?b.url:window.location.pathname).split("?")[0],m=!0,n={},o=a.extend({},location,{params:n,pathname:l,query:c()});a.each(e,function(a,b){d||(k=l.match(b.regex))&&(d=b)}),d?(k&&(k.shift(),k=a.makeArray(k)),a.each(k,function(a,b){n[d.keys[a].name]=b}),o=a.extend(o,{route:d.path,params:n}),a.each(f,function(a,b){var c=b.apply(window,[o]);m=c===!1?c:m}),m&&(d.mw?d.mw.apply(window,[o])!==!1&&d.fn.apply(window,[o]):d.fn.apply(window,[o]))):(a.each(f,function(a,b){var c=b.apply(window,[o]);m=c===!1?c:m}),m&&(o=a.extend(o,{route:null}),a.route["default"]&&a.route["default"].apply(window,[o]))),g=l,h=location.hash},a.route.init=function(b,c){i=b,j=c||j,!i&&d&&(history.onpushstate=a.route.reload),a(window).on("popstate",function(b){return i||g!==b.target.location.pathname||g===b.target.location.hash?void a.route.reload():(b.preventDefault(),!1)}),a.route.reload()}});
//# sourceMappingURL=u.route.min.js.map